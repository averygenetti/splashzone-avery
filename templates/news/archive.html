{% extends 'wavepool/base.html' %}
{% load static %}

{% block extra_style %}
	<link href="{% static 'css/news.css' %}" rel="stylesheet">
	<script src="{% static 'js/live_search.js' %}"></script>
{% endblock %}

{% block page_content %}
	<form id="archive-filter" method="GET">
		<div class="form-group row">
			<div class="col-sm-2 col-form-label">
				<label for="topics">Filter by topic:</label>
			</div>
			<div class="col">
				<!-- Changing this to a select makes it just a bit easier to work with in jQuery. -->
				<select id="topics" name="topics" multiple="multiple" class="form form-multiselect">
				  {% for topic in topics %}
				  	<option value="{{topic.id}}">{{topic.display_name}}</option>
				  {% endfor %}
				</select>
			</div>
			<div class="col-sm-1 col-form-label">
				<label for="text_search">Text:</label>
			</div>
			<div class="col">
				<input type="text" id="id_text_search" name="text_search" class="form-control" {% if text_search %}value="{{text_search}}" {% endif %}/>
			</div>
			<div class="col">
				<!-- Submit is no longer useful, but 'Clear' is! -->
				<input type="button" id="clear" name="clear" class="btn btn-dark" value="Clear" />
			</div>
		</div>
	</form>
	<span class="search" id="search_results">
		<div class="row" id="search-result-header">
			<h2>Search Results</h2>
		</div>
		<div class="row search-description">

			<span id="search_text_display">
				<div class="col">
					<b>Search term:</b> <span id="search_term"></span> <!-- JS will populate this with the current search term when applicable -->
				</div>
			</span>
			
			<span id="topic_search_display">
				<div class="col">
					<b>Topics:</b> <span id="topic_list"></span> <!-- JS will populate this with the current topic list when applicable -->
				</div>
			</span>
			
		</div>
		<div class="row">
			<ul class="feed" id="search_results_feed">
				<!-- Javascript will place results here if there are results to be had. -->
			</ul>
		</div>
	</span>
	<!-- We'll hide this section if any filters are being used. -->
	<span class="news_archive" id="news_archive">
		<div class="row">
			<h2>News Archive</h2>
		</div>
		<div class="row">
			<!-- If we don't have any filters selected, let Django render the archive normally -->
			{% include 'news/includes/news_feed.html' with feed=news_archive feed_id="archive" format="detailed" %}
		</div>
	</span>
{% endblock %}
